package io.loli.box.service;

import java.io.File;
import java.io.IOException;
import java.io.InputStream;
import java.util.List;

/**
 * All storage service should implements this interface
 * 
 * @author choco
 *
 */
public interface StorageService {
    /**
     * Upload an image file
     * 
     * @param file file to upload. After uploaded, file name will be changed to
     *            nano time.
     * @return A relative url str generated by storage service
     * @throws IOException Will be throwed while IO error occurred
     */
    public String upload(File file) throws IOException;

    /**
     * Upload an InputStream with file name
     * 
     * @param is file to upload. After uploaded, file name will be changed to
     *            nano time.
     * @param filename origin name of this file
     * @return A relative url str generated by storage service
     * @throws IOException Will be throwed while IO error occurred
     */
    public String upload(InputStream is, String filename) throws IOException;

    /**
     * Get all File objects of root year folders
     * 
     * @return List of File objects
     */
    public List<File> getYears();

    /**
     * Get all File objects of the year folder
     * 
     * @param year year to show
     * @return List of File objects
     */
    public List<File> getMonthsByYear(String year);

    /**
     * Get all File objects of the month folder
     * 
     * @param year year to show
     * @param month month to show
     * @return List of File objects
     */
    public List<File> getDaysByMonth(String year, String month);

    /**
     * Get all File objects of the day folder
     * 
     * @param year year to show
     * @param month month to show
     * @param day day to show
     * @return List of File objects
     * @throws IllegalArgumentException while three params are not illegal
     */
    public List<File> getFilesByDay(String year, String month, String day);

    public void deleteFile(String year, String month, String day, String name);
}
